2025-03-07 16:40:10.858 +07:00 [INF] Now listening on: http://localhost:5257
2025-03-07 16:40:11.010 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-07 16:40:11.011 +07:00 [INF] Hosting environment: Development
2025-03-07 16:40:11.011 +07:00 [INF] Content root path: C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka
2025-03-07 16:40:11.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - null null
2025-03-07 16:40:11.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - 200 null text/html;charset=utf-8 278.4054ms
2025-03-07 16:40:11.709 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/_framework/aspnetcore-browser-refresh.js - null null
2025-03-07 16:40:11.715 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.7632ms
2025-03-07 16:40:11.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/_vs/browserLink - null null
2025-03-07 16:40:11.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.8589ms
2025-03-07 16:40:11.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - null null
2025-03-07 16:40:11.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.0464ms
2025-03-07 16:40:32.234 +07:00 [INF] Now listening on: http://localhost:5257
2025-03-07 16:40:32.573 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-07 16:40:32.574 +07:00 [INF] Hosting environment: Development
2025-03-07 16:40:32.574 +07:00 [INF] Content root path: C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka
2025-03-07 16:40:32.690 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - null null
2025-03-07 16:40:32.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - 200 null text/html;charset=utf-8 308.931ms
2025-03-07 16:40:33.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/_framework/aspnetcore-browser-refresh.js - null null
2025-03-07 16:40:33.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/_vs/browserLink - null null
2025-03-07 16:40:33.069 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 3.8774ms
2025-03-07 16:40:33.115 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.8765ms
2025-03-07 16:40:33.191 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - null null
2025-03-07 16:40:33.205 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.8974ms
2025-03-07 16:40:54.431 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-available-ticket?page=1&orderBy=ticketCode&orderState=asc - null null
2025-03-07 16:40:54.441 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.TicketController.GetAvailableTickets (Acceloka)'
2025-03-07 16:40:54.474 +07:00 [INF] Route matched with {action = "GetAvailableTickets", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableTickets(System.String, System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String, System.String, System.Nullable`1[System.Int32]) on controller Acceloka.Controllers.TicketController (Acceloka).
2025-03-07 16:40:54.534 +07:00 [INF] Handling request cc7d79f7-e8d6-4d1f-8022-a6bcdfea9001: {"CategoryName":null,"TicketCode":null,"TicketName":null,"MaxPrice":null,"MinEventDate":null,"MaxEventDate":null,"OrderBy":"ticketCode","OrderState":"asc","Page":1}
2025-03-07 16:40:54.621 +07:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2025-03-07 16:40:56.285 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Date], [t0].[Quota], [t0].[Code], [t0].[Name], [c].[Name], [t0].[Price]
FROM (
    SELECT [t].[Code], [t].[CategoryId], [t].[Date], [t].[Name], [t].[Price], [t].[Quota]
    FROM [Ticket] AS [t]
    WHERE [t].[Quota] > 0
    ORDER BY [t].[Code]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t0]
INNER JOIN [Category] AS [c] ON [t0].[CategoryId] = [c].[Id]
ORDER BY [t0].[Code]
2025-03-07 16:40:56.364 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ticket] AS [t]
WHERE [t].[Quota] > 0
2025-03-07 16:40:56.370 +07:00 [INF] Response for cc7d79f7-e8d6-4d1f-8022-a6bcdfea9001: {}
2025-03-07 16:40:56.380 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Collections.Generic.List`1[[Acceloka.Models.Responses.GetAvailableTicketsResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-07 16:40:56.393 +07:00 [INF] Executed action Acceloka.Controllers.TicketController.GetAvailableTickets (Acceloka) in 1914.5675ms
2025-03-07 16:40:56.393 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.TicketController.GetAvailableTickets (Acceloka)'
2025-03-07 16:40:56.409 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-available-ticket?page=1&orderBy=ticketCode&orderState=asc - 200 null application/json; charset=utf-8 1981.0792ms
2025-03-07 16:41:00.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:00.333 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:00.339 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:00.364 +07:00 [INF] Handling request 1585d7b6-4699-43cf-aaac-439e6f564235: {"BookedTicketId":1}
2025-03-07 16:41:00.395 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:00.500 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:00.633 +07:00 [INF] Response for 1585d7b6-4699-43cf-aaac-439e6f564235: [{"QtyPerCategory":8,"CategoryName":"Cinema","Tickets":[{"TicketCode":"C004","TicketName":"John Wick IMAX","EventDate":"15-08-2025 19:00"},{"TicketCode":"C002","TicketName":"Batman IMAX","EventDate":"18-06-2025 21:30"}]},{"QtyPerCategory":4,"CategoryName":"Hotel","Tickets":[{"TicketCode":"H001","TicketName":"Ibis Hotel Jakarta 21-23","EventDate":"12-05-2025 12:00"}]},{"QtyPerCategory":4,"CategoryName":"Transportasi Darat","Tickets":[{"TicketCode":"TD004","TicketName":"Bus Jakarta-Bali","EventDate":"05-08-2025 14:00"}]}]
2025-03-07 16:41:00.634 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.GetBookedTicketsResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:00.635 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 296.5991ms
2025-03-07 16:41:00.636 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:00.636 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 200 null application/json; charset=utf-8 306.9513ms
2025-03-07 16:41:04.849 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/C004/4 - null null
2025-03-07 16:41:04.851 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:04.853 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/C004/4 - 204 null null 3.6271ms
2025-03-07 16:41:04.856 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/C004/4 - null null
2025-03-07 16:41:04.857 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:04.857 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:04.862 +07:00 [INF] Route matched with {action = "RevokeTicket", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeTicket(Int32, System.String, Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:04.875 +07:00 [INF] Handling request 784834ad-3766-4d06-ae44-0edac791bcb3: {"BookedTicketId":1,"TicketCode":"C004","Quantity":4}
2025-03-07 16:41:04.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:04.904 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
        WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:04.917 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [BookedTicket] AS [b]
INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1
2025-03-07 16:41:04.921 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:05.015 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Detail] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-07 16:41:05.061 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Detail]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-07 16:41:05.066 +07:00 [INF] Response for 784834ad-3766-4d06-ae44-0edac791bcb3: [{"TicketCode":"H001","TicketName":"Ibis Hotel Jakarta 21-23","Quantity":4,"CategoryName":"Hotel"},{"TicketCode":"TD004","TicketName":"Bus Jakarta-Bali","Quantity":4,"CategoryName":"Transportasi Darat"},{"TicketCode":"C002","TicketName":"Batman IMAX","Quantity":4,"CategoryName":"Cinema"}]
2025-03-07 16:41:05.067 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.ModifyTicketResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:05.068 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka) in 205.0855ms
2025-03-07 16:41:05.068 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:05.068 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/C004/4 - 200 null application/json; charset=utf-8 211.7122ms
2025-03-07 16:41:05.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:05.202 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:05.203 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:05.206 +07:00 [INF] Handling request 92c4fe2c-3ab3-44f7-abcd-b9e0f3d361ff: {"BookedTicketId":1}
2025-03-07 16:41:05.212 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:05.215 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:05.217 +07:00 [INF] Response for 92c4fe2c-3ab3-44f7-abcd-b9e0f3d361ff: [{"QtyPerCategory":4,"CategoryName":"Hotel","Tickets":[{"TicketCode":"H001","TicketName":"Ibis Hotel Jakarta 21-23","EventDate":"12-05-2025 12:00"}]},{"QtyPerCategory":4,"CategoryName":"Transportasi Darat","Tickets":[{"TicketCode":"TD004","TicketName":"Bus Jakarta-Bali","EventDate":"05-08-2025 14:00"}]},{"QtyPerCategory":4,"CategoryName":"Cinema","Tickets":[{"TicketCode":"C002","TicketName":"Batman IMAX","EventDate":"18-06-2025 21:30"}]}]
2025-03-07 16:41:05.217 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.GetBookedTicketsResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:05.217 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 14.3618ms
2025-03-07 16:41:05.217 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:05.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 200 null application/json; charset=utf-8 15.8372ms
2025-03-07 16:41:11.653 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/H001/4 - null null
2025-03-07 16:41:11.653 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:11.653 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/H001/4 - 204 null null 0.6919ms
2025-03-07 16:41:11.657 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/H001/4 - null null
2025-03-07 16:41:11.657 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:11.657 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:11.658 +07:00 [INF] Route matched with {action = "RevokeTicket", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeTicket(Int32, System.String, Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:11.659 +07:00 [INF] Handling request 4748e932-bb89-496f-96d4-7d285fbb5fa3: {"BookedTicketId":1,"TicketCode":"H001","Quantity":4}
2025-03-07 16:41:11.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:11.666 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
        WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:11.668 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [BookedTicket] AS [b]
INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1
2025-03-07 16:41:11.671 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:11.673 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Detail] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-07 16:41:11.676 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Detail]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-07 16:41:11.676 +07:00 [INF] Response for 4748e932-bb89-496f-96d4-7d285fbb5fa3: [{"TicketCode":"TD004","TicketName":"Bus Jakarta-Bali","Quantity":4,"CategoryName":"Transportasi Darat"},{"TicketCode":"C002","TicketName":"Batman IMAX","Quantity":4,"CategoryName":"Cinema"}]
2025-03-07 16:41:11.676 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.ModifyTicketResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:11.676 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka) in 18.8399ms
2025-03-07 16:41:11.676 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:11.677 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/H001/4 - 200 null application/json; charset=utf-8 19.5733ms
2025-03-07 16:41:11.810 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:11.811 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:11.812 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:11.822 +07:00 [INF] Handling request f63d7bda-e912-4b22-9a79-52271c4926d3: {"BookedTicketId":1}
2025-03-07 16:41:11.825 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:11.831 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:11.832 +07:00 [INF] Response for f63d7bda-e912-4b22-9a79-52271c4926d3: [{"QtyPerCategory":4,"CategoryName":"Transportasi Darat","Tickets":[{"TicketCode":"TD004","TicketName":"Bus Jakarta-Bali","EventDate":"05-08-2025 14:00"}]},{"QtyPerCategory":4,"CategoryName":"Cinema","Tickets":[{"TicketCode":"C002","TicketName":"Batman IMAX","EventDate":"18-06-2025 21:30"}]}]
2025-03-07 16:41:11.833 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.GetBookedTicketsResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:11.834 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 21.7454ms
2025-03-07 16:41:11.834 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:11.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 200 null application/json; charset=utf-8 24.421ms
2025-03-07 16:41:14.079 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/TD004/4 - null null
2025-03-07 16:41:14.079 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:14.079 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/TD004/4 - 204 null null 0.4087ms
2025-03-07 16:41:14.083 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/TD004/4 - null null
2025-03-07 16:41:14.083 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:14.083 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:14.083 +07:00 [INF] Route matched with {action = "RevokeTicket", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeTicket(Int32, System.String, Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:14.085 +07:00 [INF] Handling request eeeaa833-703d-47fa-aad5-4970a6f15d65: {"BookedTicketId":1,"TicketCode":"TD004","Quantity":4}
2025-03-07 16:41:14.088 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:14.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
        WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:14.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [BookedTicket] AS [b]
INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1
2025-03-07 16:41:14.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:14.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Detail] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-07 16:41:14.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Detail]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-07 16:41:14.102 +07:00 [INF] Response for eeeaa833-703d-47fa-aad5-4970a6f15d65: [{"TicketCode":"C002","TicketName":"Batman IMAX","Quantity":4,"CategoryName":"Cinema"}]
2025-03-07 16:41:14.102 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.ModifyTicketResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:14.102 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka) in 18.7202ms
2025-03-07 16:41:14.102 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:14.102 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/TD004/4 - 200 null application/json; charset=utf-8 19.3935ms
2025-03-07 16:41:14.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:14.244 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:14.244 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:14.245 +07:00 [INF] Handling request d1a27fbc-f33c-4b8b-9abc-c59917b6e9f8: {"BookedTicketId":1}
2025-03-07 16:41:14.248 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:14.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:14.253 +07:00 [INF] Response for d1a27fbc-f33c-4b8b-9abc-c59917b6e9f8: [{"QtyPerCategory":4,"CategoryName":"Cinema","Tickets":[{"TicketCode":"C002","TicketName":"Batman IMAX","EventDate":"18-06-2025 21:30"}]}]
2025-03-07 16:41:14.253 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.GetBookedTicketsResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:14.254 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 9.2569ms
2025-03-07 16:41:14.254 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:14.254 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 200 null application/json; charset=utf-8 10.2072ms
2025-03-07 16:41:16.337 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/C002/4 - null null
2025-03-07 16:41:16.337 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:16.337 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5257/api/v1/revoke-ticket/1/C002/4 - 204 null null 0.344ms
2025-03-07 16:41:16.341 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/C002/4 - null null
2025-03-07 16:41:16.341 +07:00 [INF] CORS policy execution successful.
2025-03-07 16:41:16.341 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:16.341 +07:00 [INF] Route matched with {action = "RevokeTicket", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeTicket(Int32, System.String, Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:16.342 +07:00 [INF] Handling request 3a866dd4-3382-4043-91ba-6f7808232b79: {"BookedTicketId":1,"TicketCode":"C002","Quantity":4}
2025-03-07 16:41:16.345 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:16.349 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
        WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:16.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32), @__ToUpper_1='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [BookedTicket] AS [b]
INNER JOIN [Detail] AS [d] ON [b].[Id] = [d].[BookedTicketId]
WHERE [b].[Id] = @__bookedTicketId_0 AND [d].[TicketCode] = @__ToUpper_1
2025-03-07 16:41:16.354 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[Date], [t].[UpdatedAt], [t].[UpdatedBy], [t0].[Id], [t0].[BookedTicketId], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[Quantity], [t0].[TicketCode], [t0].[UpdatedAt], [t0].[UpdatedBy], [t0].[Code], [t0].[CategoryId], [t0].[CreatedAt0], [t0].[CreatedBy0], [t0].[Date], [t0].[Name], [t0].[Price], [t0].[Quota], [t0].[UpdatedAt0], [t0].[UpdatedBy0], [t0].[Id0], [t0].[CreatedAt1], [t0].[CreatedBy1], [t0].[Name0], [t0].[UpdatedAt1], [t0].[UpdatedBy1]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[CreatedBy], [b].[Date], [b].[UpdatedAt], [b].[UpdatedBy]
    FROM [BookedTicket] AS [b]
    WHERE [b].[Id] = @__bookedTicketId_0
) AS [t]
LEFT JOIN (
    SELECT [d].[Id], [d].[BookedTicketId], [d].[CreatedAt], [d].[CreatedBy], [d].[Quantity], [d].[TicketCode], [d].[UpdatedAt], [d].[UpdatedBy], [t1].[Code], [t1].[CategoryId], [t1].[CreatedAt] AS [CreatedAt0], [t1].[CreatedBy] AS [CreatedBy0], [t1].[Date], [t1].[Name], [t1].[Price], [t1].[Quota], [t1].[UpdatedAt] AS [UpdatedAt0], [t1].[UpdatedBy] AS [UpdatedBy0], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt1], [c].[CreatedBy] AS [CreatedBy1], [c].[Name] AS [Name0], [c].[UpdatedAt] AS [UpdatedAt1], [c].[UpdatedBy] AS [UpdatedBy1]
    FROM [Detail] AS [d]
    INNER JOIN [Ticket] AS [t1] ON [d].[TicketCode] = [t1].[Code]
    INNER JOIN [Category] AS [c] ON [t1].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookedTicketId]
ORDER BY [t].[Id], [t0].[Id], [t0].[Code]
2025-03-07 16:41:16.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Detail] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-07 16:41:16.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Detail]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-07 16:41:16.369 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [BookedTicket]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-07 16:41:16.370 +07:00 [INF] Response for 3a866dd4-3382-4043-91ba-6f7808232b79: []
2025-03-07 16:41:16.370 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Acceloka.Models.Responses.ModifyTicketResponse, Acceloka, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-07 16:41:16.370 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka) in 28.7258ms
2025-03-07 16:41:16.370 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.RevokeTicket (Acceloka)'
2025-03-07 16:41:16.370 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5257/api/v1/revoke-ticket/1/C002/4 - 200 null application/json; charset=utf-8 29.4053ms
2025-03-07 16:41:16.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:16.504 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:16.504 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:16.504 +07:00 [INF] Handling request 3c26428c-2f70-44bf-a264-ddc0adfe5027: {"BookedTicketId":1}
2025-03-07 16:41:16.506 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:16.724 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 219.8781ms
2025-03-07 16:41:16.724 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:16.726 +07:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- BookedTicketId: Booking 1 not found Severity: Error
   at Acceloka.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Behaviors\ValidationBehavior.cs:line 39
   at Acceloka.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Behaviors\LoggingBehavior.cs:line 18
   at Acceloka.Controllers.BookedTicketController.GetBookedTickets(Int32 bookedTicketId) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Controllers\BookedTicketController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-07 16:41:16.747 +07:00 [ERR] One or more validation errors occurred
2025-03-07 16:41:16.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 400 null application/json; charset=utf-8 254.6155ms
2025-03-07 16:41:19.038 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - null null
2025-03-07 16:41:19.039 +07:00 [INF] Executing endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:19.039 +07:00 [INF] Route matched with {action = "GetBookedTickets", controller = "BookedTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedTickets(Int32) on controller Acceloka.Controllers.BookedTicketController (Acceloka).
2025-03-07 16:41:19.039 +07:00 [INF] Handling request 760630b0-328f-4ee5-bb13-41da84daec63: {"BookedTicketId":1}
2025-03-07 16:41:19.043 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookedTicketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BookedTicket] AS [b]
        WHERE [b].[Id] = @__bookedTicketId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-07 16:41:19.207 +07:00 [INF] Executed action Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka) in 167.8501ms
2025-03-07 16:41:19.207 +07:00 [INF] Executed endpoint 'Acceloka.Controllers.BookedTicketController.GetBookedTickets (Acceloka)'
2025-03-07 16:41:19.208 +07:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- BookedTicketId: Booking 1 not found Severity: Error
   at Acceloka.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Behaviors\ValidationBehavior.cs:line 39
   at Acceloka.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Behaviors\LoggingBehavior.cs:line 18
   at Acceloka.Controllers.BookedTicketController.GetBookedTickets(Int32 bookedTicketId) in C:\Users\Nathan Widjaja\source\repos\Acceloka\Acceloka\Controllers\BookedTicketController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-07 16:41:19.208 +07:00 [ERR] One or more validation errors occurred
2025-03-07 16:41:19.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/api/v1/get-booked-ticket/1 - 400 null application/json; charset=utf-8 170.3363ms
